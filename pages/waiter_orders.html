<!-- This screen shows the orders that are pending for said waiter
 The waiter can access this from the button in venueMenu.html
 It will have an x for the orders that have not been served by the server and a tick for the served ones
 For the ticked ones, you can click them to start their payment procedure which will lead to payment_details.html
 should have a back button that leads back to the venueMenu.html-->
 <!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Waiter Orders</title>
    <link rel="stylesheet" href="../styles/waiter_orders.css"> <!-- Assuming you have a CSS file -->
</head>
<body>
    <header>
        <h1>Pending Orders</h1>
    </header>

    <main>
        <ul id="order-list">
            <!-- Orders will be dynamically added here -->
            <!-- Example of an order item:
            <li data-order-id="1">
                <span>Order #1 - Table 5</span>
                <button class="order-status" onclick="updateOrderStatus(this, 'served')">&#10003;</button>
                <button class="order-status" onclick="updateOrderStatus(this, 'pending')">&#10005;</button>
            </li>
            -->
        </ul>
    </main>

    <footer>
        <button onclick="goBack()">Back</button>
    </footer>

    <script>
        // Example order data - This would normally come from your server
        const orders = [
            { id: 1, table: 5, status: 'pending' },
            { id: 2, table: 3, status: 'served' },
            // Add more orders as needed
        ];

        // Function to load orders
        function loadOrders() {
            const orderList = document.getElementById('order-list');
            orderList.innerHTML = ''; // Clear existing orders

            orders.forEach(order => {
                const orderItem = document.createElement('li');
                orderItem.dataset.orderId = order.id;
                orderItem.innerHTML = `
                    <span>Order #${order.id} - Table ${order.table}</span>
                    <button class="order-status" onclick="updateOrderStatus(this, 'served')" ${order.status === 'served' ? 'disabled' : ''}>&#10003;</button>
                    <button class="order-status" onclick="updateOrderStatus(this, 'pending')" ${order.status === 'pending' ? 'disabled' : ''}>&#10005;</button>
                `;
                orderList.appendChild(orderItem);
            });
        }

        // Function to update order status
        //This function should be in the server.html side
        //Maybe access the same db items and if served state changes and also changes on this screen
        function updateOrderStatus(button, status) {
            const orderId = button.parentElement.dataset.orderId;
            const order = orders.find(order => order.id == orderId);
            order.status = status;

            if (status === 'served') {
                // Redirect to payment procedure if the order is served
                window.location.href = 'payment_details.html';
            } else {
                // Reload orders to update the UI
                loadOrders();
            }
        }

        // Function to go back to venue menu
        function goBack() {
            window.location.href = 'venueMenu.html';
        }

        // Load orders on page load
        window.onload = loadOrders;
    </script>
</body>
</html>

